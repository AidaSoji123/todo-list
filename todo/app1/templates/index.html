<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #333;
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .add-task-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .add-task-input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .add-task-btn {
            padding: 8px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .add-task-btn:hover {
            background-color: #45a049;
        }

        .searchbar-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .searchbar-input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .search-btn {
            padding: 8px;
            background-color: #337ab7;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .search-btn:hover {
            background-color: #286090;
        }
    </style>
</head>

<body>

    <header>
        <div>
            <h1>To-Do List</h1>
            <div>Hello, <span id="username">User</span></div>
            <div>Incompleted Tasks: <span id="incompleteCount">0</span></div>
        </div>
        <div>
            <button onclick="logout()">Logout</button>
        </div>
    </header>

    <div class="container">
        <div class="searchbar-container">
            <input type="text" id="searchTask" class="searchbar-input" placeholder="Search tasks...">
            <button onclick="searchTask()" class="search-btn">Search</button>
        </div>

        <ul id="taskList"></ul>

        <div class="add-task-container">
            <!-- <input type="text" id="newTask" class="add-task-input" placeholder="New Task..."> -->
            <!-- <button onclick="addTask()" class="add-task-btn">Add Task</button> -->
            <a href="{% url 'app1:task' %}"><button class="add-task-btn">Add Task</button></a>
        </div>
    </div>


    {% for item in task %}

    {{ item.task }}

    {% endfor %}

    <script>
        // Sample tasks (you can fetch from a server or use localStorage)
        let tasks = [
            { id: 1, text: 'Task 1', completed: false },
            { id: 2, text: 'Task 2', completed: true },
            // Add more tasks as needed




        ];

        const taskList = document.getElementById('taskList');
        const incompleteCount = document.getElementById('incompleteCount');
        const usernameSpan = document.getElementById('username');

        // Initial rendering of tasks
        renderTasks();

        function renderTasks() {
            taskList.innerHTML = '';

            tasks.forEach(task => {
                const listItem = document.createElement('li');

                const taskText = document.createElement('span');
                taskText.textContent = task.text;

                const actionsContainer = document.createElement('div');
                actionsContainer.classList.add('task-actions');

                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.addEventListener('click', () => editTask(task.id));

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.addEventListener('click', () => deleteTask(task.id));

                const completedCheckbox = document.createElement('input');
                completedCheckbox.type = 'checkbox';
                completedCheckbox.checked = task.completed;
                completedCheckbox.addEventListener('change', () => toggleTaskCompleted(task.id));

                actionsContainer.appendChild(editBtn);
                actionsContainer.appendChild(deleteBtn);

                listItem.appendChild(taskText);
                listItem.appendChild(completedCheckbox);
                listItem.appendChild(actionsContainer);

                taskList.appendChild(listItem);
            });

            updateIncompleteCount();
        }

        function addTask() {
            const newTaskInput = document.getElementById('newTask');
            const newTaskText = newTaskInput.value.trim();

            if (newTaskText !== '') {
                const newTask = {
                    id: tasks.length + 1,
                    text: newTaskText,
                    completed: false,
                };

                tasks.push(newTask);
                renderTasks();
                newTaskInput.value = '';
            }
        }

        function editTask(taskId) {
            const newText = prompt('Edit task:');
            if (newText !== null) {
                const taskIndex = tasks.findIndex(task => task.id === taskId);
                if (taskIndex !== -1) {
                    tasks[taskIndex].text = newText;
                    renderTasks();
                }
            }
        }

        function deleteTask(taskId) {
            const confirmDelete = confirm('Are you sure you want to delete this task?');
            if (confirmDelete) {
                tasks = tasks.filter(task => task.id !== taskId);
                renderTasks();
            }
        }

        function toggleTaskCompleted(taskId) {
            const taskIndex = tasks.findIndex(task => task.id === taskId);
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = !tasks[taskIndex].completed;
                renderTasks();
            }
        }

        function updateIncompleteCount() {
            const incompleteTasks = tasks.filter(task => !task.completed).length;
            incompleteCount.textContent = incompleteTasks;
        }

        function searchTask() {
            const searchTerm = document.getElementById('searchTask').value.trim().toLowerCase();
            const filteredTasks = tasks.filter(task => task.text.toLowerCase().includes(searchTerm));
            renderTasks(filteredTasks);
        }

        function logout() {
            // Implement your logout logic here
            alert('Logout clicked');
            window.open('login.html');
        }
    </script>

</body>

</html>